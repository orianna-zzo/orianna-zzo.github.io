<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="ZHENG Zi&#39;ou">
<meta name="description" content="为什么使用shortcode 由于Hugo支持在文本内容中使用html标签，因此在文本中的文字如果需要高亮可以直接使用&lt;mark&gt;标签即可。但是code fence中的代码如何进行高亮呢？直接在code fence中使用html标签会被默认为文本（理应有办法转义，但暂时还不了解）。
之前我的方案是使用highlight shortcode(参见Hugo的语法高亮配置)，但是由于highlight渲染的风格难以调整的关系，对于这个使用起来非常不灵活。而且使用hightlight shortcode只能一行一行地高亮，不够灵活，有时只想高亮代码段中部分代码怎么办？
什么是shortcode模板 Hugo官网对Shortcode介绍为出现在内容文件中可以自定义的代码片段(snippets)，可以减少作者在Markdown的内容中增加大段html的标签内容。Hugo本身提供了一些内建的shortcode，比如我之前使用的highlight就是其中一个，还有一些其他常用的片段内容。
Shortcode不会在Hugo模板(template)中起作用，对应在Hugo模板中的片段应放在partial文件夹中作为partial模板。
新建shortcode改变背景色 在/layouts/shortcodes/文件夹中新建一个html文件，文件名是shortcode的代码名。
在这个场景中，我想要改变选中文字的背景色，因此我新建了bgstyle.html文件。
在该文件中写shortcode的内容：
{{- if eq (.Get 0) &quot;yellow&quot; -}} &lt;mark style=&quot;background: #ffeb92fd;&quot;&gt; {{- .Inner -}} &lt;/mark&gt; {{- else if eq (.Get 0) &quot;red&quot; -}} &lt;mark style=&quot;background: #fa9494;&quot;&gt; {{- .Inner -}} &lt;/mark&gt; {{- else if eq (.Get 0) &quot;blue&quot; -}} &lt;mark style=&quot;background: #9ccaff;&quot;&gt; {{- .Inner -}} &lt;/mark&gt; {{- else if eq (.Get 0) &quot;green&quot; -}} &lt;mark style=&quot;background: #acffea;&quot;&gt; {{- .">

<meta property="og:title" content="Blog养成记(15) 创建shortcode模板便捷高亮内容" />
<meta property="og:description" content="为什么使用shortcode 由于Hugo支持在文本内容中使用html标签，因此在文本中的文字如果需要高亮可以直接使用&lt;mark&gt;标签即可。但是code fence中的代码如何进行高亮呢？直接在code fence中使用html标签会被默认为文本（理应有办法转义，但暂时还不了解）。
之前我的方案是使用highlight shortcode(参见Hugo的语法高亮配置)，但是由于highlight渲染的风格难以调整的关系，对于这个使用起来非常不灵活。而且使用hightlight shortcode只能一行一行地高亮，不够灵活，有时只想高亮代码段中部分代码怎么办？
什么是shortcode模板 Hugo官网对Shortcode介绍为出现在内容文件中可以自定义的代码片段(snippets)，可以减少作者在Markdown的内容中增加大段html的标签内容。Hugo本身提供了一些内建的shortcode，比如我之前使用的highlight就是其中一个，还有一些其他常用的片段内容。
Shortcode不会在Hugo模板(template)中起作用，对应在Hugo模板中的片段应放在partial文件夹中作为partial模板。
新建shortcode改变背景色 在/layouts/shortcodes/文件夹中新建一个html文件，文件名是shortcode的代码名。
在这个场景中，我想要改变选中文字的背景色，因此我新建了bgstyle.html文件。
在该文件中写shortcode的内容：
{{- if eq (.Get 0) &quot;yellow&quot; -}} &lt;mark style=&quot;background: #ffeb92fd;&quot;&gt; {{- .Inner -}} &lt;/mark&gt; {{- else if eq (.Get 0) &quot;red&quot; -}} &lt;mark style=&quot;background: #fa9494;&quot;&gt; {{- .Inner -}} &lt;/mark&gt; {{- else if eq (.Get 0) &quot;blue&quot; -}} &lt;mark style=&quot;background: #9ccaff;&quot;&gt; {{- .Inner -}} &lt;/mark&gt; {{- else if eq (.Get 0) &quot;green&quot; -}} &lt;mark style=&quot;background: #acffea;&quot;&gt; {{- ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://orianna-zzo.github.io/blog/2018-08/blog%E5%85%BB%E6%88%90%E8%AE%B015-%E5%88%9B%E5%BB%BAshortcode%E6%A8%A1%E6%9D%BF%E4%BE%BF%E6%8D%B7%E9%AB%98%E4%BA%AE%E5%86%85%E5%AE%B9/" />



<meta property="article:published_time" content="2018-08-21T21:59:02&#43;08:00"/>

<meta property="article:modified_time" content="2018-08-21T21:59:02&#43;08:00"/>






  
  








<title>


     Blog养成记(15) 创建shortcode模板便捷高亮内容 

</title>
<link rel="canonical" href="https://orianna-zzo.github.io/blog/2018-08/blog%E5%85%BB%E6%88%90%E8%AE%B015-%E5%88%9B%E5%BB%BAshortcode%E6%A8%A1%E6%9D%BF%E4%BE%BF%E6%8D%B7%E9%AB%98%E4%BA%AE%E5%86%85%E5%AE%B9/">








<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">
 
  
  <link rel="stylesheet" href="https://orianna-zzo.github.io/css/reset.css?t=2018-09-02%2017%3a19%3a56.198786662%20%2b0000%20UTC%20m%3d%2b0.216671463">
  <link rel="stylesheet" href="https://orianna-zzo.github.io/css/main.css?t=2018-09-02%2017%3a19%3a56.198786662%20%2b0000%20UTC%20m%3d%2b0.216671463">
  
  
    <link rel="stylesheet" href="https://orianna-zzo.github.io/css/override.css?t=2018-09-02%2017%3a19%3a56.198786662%20%2b0000%20UTC%20m%3d%2b0.216671463"> 
   



<link rel="shortcut icon" 
   
    href="https://orianna-zzo.github.io/img/zheng.png" 
  >










<link rel="stylesheet" href="https://orianna-zzo.github.io/js/katex/katex.min.css">




  
  <link rel="stylesheet" href="https://orianna-zzo.github.io/css/highlight/github-gist.css">


</head>


<body lang="">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <a href="https://orianna-zzo.github.io/"><img class="avatar" src="https://orianna-zzo.github.io/img/profile.png" srcset="https://orianna-zzo.github.io/img/profile.png 1x"></a>
            
            <a href="https://orianna-zzo.github.io/"><div class="name">ZHENG Zi&#39;ou</div></a>
            
              <h3 class="self-intro">Be myself. Love the wonderful world. Do the right things in the right way.</h3>
            
            <nav>
                <ul>
                    
                        <li class="nav-blog"><a href="https://orianna-zzo.github.io/blog/"><span>Blog</span></a></li>
                    
                        <li class="nav-about"><a href="https://orianna-zzo.github.io/about/"><span>About</span></a></li>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">
        
            <a href="//github.com/orianna-zzo" target="_blank" rel="noopener"><img class="icon" src="https://orianna-zzo.github.io/img/github.svg" alt="github" /></a>
        

        

        

	

        

        

        
            <a href="//linkedin.com/in/ziouzheng" target="_blank" rel="noopener"><img class="icon" src="https://orianna-zzo.github.io/img/linkedin.svg" alt="linkedin" /></a>
        

        

        

        

        

        
            <a href="mailto:zhengziou@gmail.com"><img class="icon" src="https://orianna-zzo.github.io/img/email.svg" alt="email" /></a>
        

        

        
        </div>
    </div>
</section>

<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Blog养成记(15) 创建shortcode模板便捷高亮内容

</div>

                    <div class="initials"><a href="https://orianna-zzo.github.io/"></a></div>
                </div>
                <div class="meta">
                    <div style="display: flex">
                        
                        <div class="date" title='2018-08-21  Tuesday  21:59:02'>2018-08-21  Tuesday  21:59:02</div>
                        
  
                        
                        <div class="reading-time"><div class="middot"></div>One minute read</div>
                        
                    </div>
                    <div style="display: flex;">
                        
                        <div class="page-tag">
                            <div class="page-tag">series:</div>
                            
                            <div class="page-tag" id="series">
                                
                                <a href="https://orianna-zzo.github.io/series/blog%E5%85%BB%E6%88%90%E8%AE%B0">Blog养成记</a> 
                                
                            </div>
                            
                        </div>
                        

                        
                        <div class="page-tag">
                            <div class="page-tag">category: </div>
                            
                            <div class="page-tag" id="categories">
                                
                                <a href="https://orianna-zzo.github.io/categories/%E6%9D%82%E6%8A%80%E6%B5%85%E5%B0%9D">杂技浅尝</a> 
                                
                            </div>
                            
                        </div>
                        
                    </div>

                    
                    <div class="page-tag">
                        <div class="page-tag">tags: </div>
                        
                        <div class="page-tag" id="tags">
                            
                            <div class="page-tag">
                                <a href="https://orianna-zzo.github.io/tags/hugo">hugo</a>
                            </div>
                            
                            <div class="page-tag">
                                <a href="https://orianna-zzo.github.io/tags/blog">blog</a>
                            </div>
                            
                        </div>
                        
                    </div>
                    
                </div>
            </div>
            <div class="markdown">
                

<h2 id="为什么使用shortcode">为什么使用shortcode</h2>

<p>由于Hugo支持在文本内容中使用html标签，因此在文本中的文字如果需要高亮可以直接使用&lt;mark&gt;标签即可。但是code fence中的代码如何进行高亮呢？直接在code fence中使用html标签会被默认为文本（理应有办法转义，但暂时还不了解）。</p>

<p>之前我的方案是使用highlight shortcode(参见<a href="https://orianna-zzo.github.io/blog/2018-01/blog%E5%85%BB%E6%88%90%E8%AE%B03-hugo%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E9%85%8D%E7%BD%AE/">Hugo的语法高亮配置</a>)，但是由于highlight渲染的风格难以调整的关系，对于这个使用起来非常不灵活。而且使用hightlight shortcode只能一行一行地高亮，不够灵活，有时只想高亮代码段中部分代码怎么办？</p>

<h2 id="什么是shortcode模板">什么是shortcode模板</h2>

<p><a href="https://gohugo.io/content-management/shortcodes/">Hugo官网</a>对Shortcode介绍为出现在内容文件中可以自定义的代码片段(snippets)，可以减少作者在Markdown的内容中增加大段html的标签内容。Hugo本身提供了一些内建的shortcode，比如我之前使用的highlight就是其中一个，还有一些其他常用的片段内容。</p>

<p>Shortcode不会在Hugo模板(template)中起作用，对应在Hugo模板中的片段应放在<code>partial</code>文件夹中作为partial模板。</p>

<h2 id="新建shortcode改变背景色">新建shortcode改变背景色</h2>

<p>在<code>/layouts/shortcodes/</code>文件夹中新建一个html文件，文件名是shortcode的代码名。</p>

<p>在这个场景中，我想要改变选中文字的背景色，因此我新建了<code>bgstyle.html</code>文件。</p>

<p>在该文件中写shortcode的内容：</p>

<pre><code class="language-html">{{- if eq (.Get 0)  &quot;yellow&quot; -}}
    &lt;mark style=&quot;background: #ffeb92fd;&quot;&gt;
        {{- .Inner -}}
    &lt;/mark&gt;
{{- else if eq (.Get 0) &quot;red&quot; -}}
    &lt;mark style=&quot;background: #fa9494;&quot;&gt;
        {{- .Inner -}}
    &lt;/mark&gt;
{{- else if eq (.Get 0) &quot;blue&quot; -}}
    &lt;mark style=&quot;background: #9ccaff;&quot;&gt;
        {{- .Inner -}}
    &lt;/mark&gt;
{{- else if eq (.Get 0) &quot;green&quot; -}}
    &lt;mark style=&quot;background: #acffea;&quot;&gt;
        {{- .Inner -}}
    &lt;/mark&gt;
{{- else if eq (.Get 0)  &quot;purple&quot; -}}
    &lt;mark style=&quot;background: #eeb4ff;&quot;&gt;
        {{- .Inner -}}
    &lt;/mark&gt;
{{- else -}}
    &lt;mark style=&quot;background: .Get 0 ;&quot;&gt;
        {{- .Inner -}}
    &lt;/mark&gt;    
{{- end -}}
</code></pre>

<p>在这个样例中，<code>.Get 0</code>是获得shortcode的第一个参数，在这里是背景颜色参数，<code>.Inner</code>是shortcode开始和结束标记之间的内容，<code>{{- code -}}</code>与<code>{{ code }}</code>的区别是前者会将html标签间的空格换行都去了，而后者会保留。由于我不希望改变高亮的格式，因此选择前者。</p>

<p>实际上shortcode模板中有更多的内容，包括传入多个参数等，这些就需要参看<a href="https://gohugo.io/content-management/shortcodes/">官方文档</a>了。</p>

<h2 id="如何使用shortcode">如何使用shortcode</h2>

<p>有两组使用方法，前者(%)在开始/结束标记之间会出现Markdown语法，后者不会：</p>

<pre><code class="language-html">&lt;!-- 会出现Markdown语法 --&gt;
{{% myshortcode %}}Hello **World!**{{% /myshortcode %}}

&lt;!-- 不会出现Markdown语法 --&gt;
{{&lt; myshortcode &gt;}}&lt;p&gt;Hello &lt;strong&gt;World!&lt;/strong&gt;&lt;/p&gt;{{&lt; /myshortcode &gt;}}
</code></pre>

<p>在我上面的例子中，使用方式和效果如下：</p>

<pre><code class="language-html">我就想{{% bgstyle blue %}}尝试一下{{% /bgstyle %}}如何使用shortcode.
我就想<mark style="background: #9ccaff;">尝试一下</mark>如何使用shortcode.
</code></pre>

<h2 id="resource资源链接汇总">Resource资源链接汇总</h2>

<p><a href="https://gohugo.io/content-management/shortcodes/">Hugo官网对Shortcode介绍</a></p>

<h2 id="版本控制">版本控制</h2>

<table>
<thead>
<tr>
<th>Version</th>
<th>Action</th>
<th>Time</th>
</tr>
</thead>

<tbody>
<tr>
<td>1.0</td>
<td>Init</td>
<td>2018-08-21</td>
</tr>
</tbody>
</table>

                <br>
                <p class="back-to-posts"><a href="https://orianna-zzo.github.io/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>



<script type="text/javascript" src="https://orianna-zzo.github.io/js/jquery/jquery-3.3.1.min.js"></script>







  
<script src="https://orianna-zzo.github.io/js/highlight.pack.js"> </script>
  <script>hljs.initHighlightingOnLoad();</script>





<script src="https://orianna-zzo.github.io/js/katex/katex.min.js"> </script>
<script src="https://orianna-zzo.github.io/js/katex/contrib/auto-render.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body);
    });
</script>







</body>
</html>

